@page "/TaskStatus"
@using NsxLibraryManager.Contracts
@using NsxLibraryManager.Services
@inject AppLocalizer Localizer

<PageTitle>@Localizer["TaskStatus"]</PageTitle>

<RadzenDataGrid
    @ref="grid"
    Data="@data"
    TItem="LibraryBackgroundRequest"
    AllowColumnResize="true"
    AllowFiltering="false"
    AllowPaging="true"
    PageSize="100"
    EmptyText="@Localizer["NoQueuedTasks"]"
    AllowSorting="false">
    <HeaderTemplate>
        <RadzenButton ButtonStyle="ButtonStyle.Danger" Icon="cleaning_services" Text="@Localizer["CleanupOldTasks"]" Click="@CleanupTasks" MouseEnter="@(args => ShowTooltip(args) )" />
    </HeaderTemplate>
    <Columns>
        <RadzenDataGridColumn Property="Id" Title="@Localizer["TaskId"]" Width="280px"/>
        <RadzenDataGridColumn Property="TaskType" Title="@Localizer["TaskType"]" Width="80px"/>
        <RadzenDataGridColumn Property="Status" Title="@Localizer["TaskStatus"]" Width="100px"/>
        <RadzenDataGridColumn Property="Progress" Title="@Localizer["CompletedItems"]" Width="130px"/>
        <RadzenDataGridColumn Property="TotalItems" Title="@Localizer["TotalItems"]" Width="80px"/>
        <RadzenDataGridColumn Property="ErrorMessage" Title="@Localizer["ErrorMessage"]"/>
        <RadzenDataGridColumn Property="Timestamp" Title="@Localizer["ReceivedTime"]"/>
        <RadzenDataGridColumn Property="StartTime" Title="@Localizer["StartTime"]"/>
        <RadzenDataGridColumn Property="CompletionTime" Title="@Localizer["CompletionTime"]"/>
    </Columns>
</RadzenDataGrid>